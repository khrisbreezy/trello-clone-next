{"ast":null,"code":"import Cookies from 'js-cookie';\nimport { NotificationManager } from 'react-notifications';\nimport axiosInstance from '../../config/axios';\nexport const LOGIN = 'LOGIN';\nexport const LOGOUT = 'LOGOUT';\nexport const SYNCCOOKIES = 'SYNCCOOKIES';\nexport const loginAsync = data => {\n  let newData = data;\n  return async dispatch => {\n    try {\n      const {\n        data: response\n      } = await axiosInstance.post(`login`, newData);\n      console.log('====================================');\n      console.log({\n        response\n      });\n      console.log('====================================');\n      dispatch(storeAuth(response.data));\n      NotificationManager.success(response.message, '', 5000);\n    } catch (error) {\n      NotificationManager.error(error.response.data.message, '', 5000);\n      return 'error';\n    }\n  };\n};\nexport const storeAuth = data => {\n  Cookies.set('token', data.token, {\n    secure: true\n  });\n  Cookies.set('user', JSON.stringify(data.user), {\n    secure: true\n  });\n  data['token'] = data.token;\n  data['user'] = data.user;\n  return {\n    type: 'LOGIN',\n    data\n  };\n};\nexport const syncCookiesToStore = data => ({\n  type: SYNCCOOKIES,\n  data\n});\nexport const logout = () => {\n  Cookies.remove('token');\n  Cookies.remove('user');\n  Cookies.remove('userType');\n  return {\n    type: LOGOUT\n  };\n};","map":{"version":3,"sources":["/Users/macbookpro/Desktop/Projects/React-Projects/trello-clone/store/actions/auth.js"],"names":["Cookies","NotificationManager","axiosInstance","LOGIN","LOGOUT","SYNCCOOKIES","loginAsync","data","newData","dispatch","response","post","console","log","storeAuth","success","message","error","set","token","secure","JSON","stringify","user","type","syncCookiesToStore","logout","remove"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,WAApB;AACA,SAAQC,mBAAR,QAAkC,qBAAlC;AAEA,OAAOC,aAAP,MAA0B,oBAA1B;AAGA,OAAO,MAAMC,KAAK,GAAG,OAAd;AACP,OAAO,MAAMC,MAAM,GAAG,QAAf;AACP,OAAO,MAAMC,WAAW,GAAG,aAApB;AAGP,OAAO,MAAMC,UAAU,GAAIC,IAAD,IAAU;AAChC,MAAIC,OAAO,GAAGD,IAAd;AACA,SAAO,MAAME,QAAN,IAAkB;AACrB,QAAI;AACA,YAAM;AAACF,QAAAA,IAAI,EAAEG;AAAP,UAAmB,MAAMR,aAAa,CAACS,IAAd,CAAoB,OAApB,EAA4BH,OAA5B,CAA/B;AACAI,MAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY;AAACH,QAAAA;AAAD,OAAZ;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ;AACAJ,MAAAA,QAAQ,CAACK,SAAS,CAACJ,QAAQ,CAACH,IAAV,CAAV,CAAR;AACAN,MAAAA,mBAAmB,CAACc,OAApB,CAA4BL,QAAQ,CAACM,OAArC,EAA8C,EAA9C,EAAkD,IAAlD;AACH,KAPD,CAOE,OAAOC,KAAP,EAAc;AACZhB,MAAAA,mBAAmB,CAACgB,KAApB,CAA0BA,KAAK,CAACP,QAAN,CAAeH,IAAf,CAAoBS,OAA9C,EAAuD,EAAvD,EAA2D,IAA3D;AACA,aAAO,OAAP;AACH;AACJ,GAZD;AAaH,CAfM;AAkBP,OAAO,MAAMF,SAAS,GAAGP,IAAI,IAAI;AAC7BP,EAAAA,OAAO,CAACkB,GAAR,CAAY,OAAZ,EAAqBX,IAAI,CAACY,KAA1B,EAAiC;AAAEC,IAAAA,MAAM,EAAE;AAAV,GAAjC;AACApB,EAAAA,OAAO,CAACkB,GAAR,CAAY,MAAZ,EAAoBG,IAAI,CAACC,SAAL,CAAef,IAAI,CAACgB,IAApB,CAApB,EAA+C;AAAEH,IAAAA,MAAM,EAAE;AAAV,GAA/C;AACAb,EAAAA,IAAI,CAAC,OAAD,CAAJ,GAAgBA,IAAI,CAACY,KAArB;AACAZ,EAAAA,IAAI,CAAC,MAAD,CAAJ,GAAeA,IAAI,CAACgB,IAApB;AAEA,SAAO;AACHC,IAAAA,IAAI,EAAE,OADH;AAEHjB,IAAAA;AAFG,GAAP;AAIH,CAVM;AAYP,OAAO,MAAMkB,kBAAkB,GAAGlB,IAAI,KAAK;AAACiB,EAAAA,IAAI,EAAEnB,WAAP;AAAoBE,EAAAA;AAApB,CAAL,CAA/B;AAGP,OAAO,MAAMmB,MAAM,GAAG,MAAM;AACxB1B,EAAAA,OAAO,CAAC2B,MAAR,CAAe,OAAf;AACA3B,EAAAA,OAAO,CAAC2B,MAAR,CAAe,MAAf;AACA3B,EAAAA,OAAO,CAAC2B,MAAR,CAAe,UAAf;AAEA,SAAO;AACHH,IAAAA,IAAI,EAAEpB;AADH,GAAP;AAGH,CARM","sourcesContent":["import Cookies from 'js-cookie';\nimport {NotificationManager} from 'react-notifications';\n\nimport axiosInstance from '../../config/axios';\n\n\nexport const LOGIN = 'LOGIN';\nexport const LOGOUT = 'LOGOUT';\nexport const SYNCCOOKIES = 'SYNCCOOKIES';\n\n\nexport const loginAsync = (data) => {\n    let newData = data;\n    return async dispatch => {\n        try {\n            const {data: response} = await axiosInstance.post(`login`, newData);\n            console.log('====================================');\n            console.log({response});\n            console.log('====================================');\n            dispatch(storeAuth(response.data));\n            NotificationManager.success(response.message, '', 5000);\n        } catch (error) {\n            NotificationManager.error(error.response.data.message, '', 5000);\n            return 'error';\n        }\n    }\n}\n\n\nexport const storeAuth = data => {\n    Cookies.set('token', data.token, { secure: true });\n    Cookies.set('user', JSON.stringify(data.user), { secure: true });\n    data['token'] = data.token;\n    data['user'] = data.user;\n\n    return {\n        type: 'LOGIN',\n        data\n    }\n};\n\nexport const syncCookiesToStore = data => ({type: SYNCCOOKIES, data});\n\n\nexport const logout = () => {\n    Cookies.remove('token');\n    Cookies.remove('user');\n    Cookies.remove('userType');\n\n    return {\n        type: LOGOUT\n    }\n}\n"]},"metadata":{},"sourceType":"module"}